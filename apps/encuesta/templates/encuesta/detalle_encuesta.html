{% extends "encuestaHome.html" %}
{% block title %}
Encuesta detalle
{% endblock title %}
{% block encuesta %}

<div class="card-header p-1">
    <em class="">Detalle encuesta/preguntas/</em>
</div>
<div class="card-body card bg-light bg-gradient border-solid text-dark mt-2">
{% if messages %}
<div>
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }} alert-dismissible" role="alert">
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        {{ message }}
    </div>
    {% endfor %}
</div>
{% endif %}
        
    {% if encuesta.estado %}
    <h5>Detalle de encuesta {{ encuesta.titulo }} <a href="{% url 'encuesta:editar_encuesta' encuesta.id %}"><i class="text-primary fa-solid fa-pen-to-square"></i></a></h5>
    <h6>Preguntas:</h6>
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3"> <!-- Columnas responsivas -->
        {% if preguntas_con_opciones %}
        {% for pregunta_con_opciones in preguntas_con_opciones %}
        <div class="col d-flex">
            <div id="pregunta" class="card mt-2 p-2">
                <div class="container">
                    <!-- Mostrar el tipo de pregunta y el texto -->
                    {{ pregunta_con_opciones.pregunta.get_tipoPregunta_display }}
                    <br>
                    {{ pregunta_con_opciones.pregunta.texto_pregunta }}
                    
                    <!-- Mostrar opciones si es selección múltiple -->
                    {% if pregunta_con_opciones.pregunta.tipoPregunta == '4' and pregunta_con_opciones.opciones %}
                        <ul>
                            <P><strong>A.</strong> {{ pregunta_con_opciones.opciones.opcion_1 }}</P>
                            <P><strong>B.</strong> {{ pregunta_con_opciones.opciones.opcion_2 }}</P>
                            <P><strong>C.</strong> {{ pregunta_con_opciones.opciones.opcion_3 }}</P>
                            <P><strong>D.</strong> {{ pregunta_con_opciones.opciones.opcion_4 }}</P>
                        </ul>
                    {% endif %}
                    
                    <div class="card-footer">
                        <a class="btn btn-info mt-2" href=""><i class="fa-solid fa-pen-to-square"></i></a>
                        <a class="btn btn-danger mt-2" href=""><i class="fa-solid fa-trash"></i></a>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
        {% else %}
        <div class="card-body alert alert-warning alert-dismissible mt-2" style="margin-inline: 12px;" role="alert">
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            <p>No hay preguntas en esta encuesta.</p>
        </div>
        {% endif %}
    </div>
    
    <a class="btn btn-primary mt-4" href="{% url 'encuesta:agregar_pregunta' encuesta.id %}">Agregar Pregunta</a>
    <hr>
    <div style="display: flex;">
        <a class="btn btn-success" href=""
            style="flex: 2; margin-right: 5px;">
            Ver Encuesta
        </a>
        <a class="btn btn-danger" href="{% url 'encuesta:eliminar_encuesta' encuesta.id %}" style="width: 20%;">
            Eliminar encuesta
        </a>
    </div>
    {% else %}
    <div>
        <div class="alert alert-danger alert-dismissible" role="alert">
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            La encuesta no se encuentra disponible. 
            <br>Estado actual: 
            {% if not encuesta.estado  %} <strong>Inactiva <i class="fa-solid fa-ban"></i> </strong> {% endif %}
        </div>
    </div>
    {% endif %}
    </div>


{% endblock encuesta %}